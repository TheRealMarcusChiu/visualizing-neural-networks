<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>deck.gl Real-Time 3D Scatter</title>
    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; }
        #container { width: 100%; height: 100%; }
    </style>
</head>
<body>
<div id="container"></div>
<script>
    const {DeckGL, ScatterplotLayer, OrbitView} = deck;

    // Generate random 3D points
    function generateData(n = 100) {
      return Array.from({length: n}, () => ({
        position: [
          (Math.random() - 0.5) * 20,  // x
          (Math.random() - 0.5) * 20,  // y
          (Math.random() - 0.5) * 20   // z
        ],
        color: [Math.random() * 255, Math.random() * 255, Math.random() * 255]
      }));
    }

    let data = generateData();

    const deckgl = new DeckGL({
      container: "container",
      views: new OrbitView({orbitAxis: 'Y'}), // 3D orbit camera
      initialViewState: {
        target: [0, 0, 0],
        zoom: 2,
        rotationOrbit: 30,
        rotationX: 30
      },
      controller: true, // allow rotate, zoom, pan
      layers: [
        new ScatterplotLayer({
          id: 'scatter',
          data,
          getPosition: d => d.position,
          getFillColor: d => d.color,
          getRadius: 0.2,
          radiusMinPixels: 2,
          radiusMaxPixels: 10
        })
      ]
    });

    // Real-time updates
    setInterval(() => {
      data = generateData();
      deckgl.setProps({
        layers: [
          new ScatterplotLayer({
            id: 'scatter',
            data,
            getPosition: d => d.position,
            getFillColor: d => d.color,
            getRadius: 0.2
          })
        ]
      });
    }, 1000); // update every second
</script>
</body>
</html>
